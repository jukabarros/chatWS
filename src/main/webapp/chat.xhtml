<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
       xmlns:p="http://primefaces.org/ui">
<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Chat WS</title>

</h:head>
<h:body>
    <ui:composition template="layout/template.xhtml">
      <ui:define name="content">
            
      <p:panel visible="#{!chatController.createUserPanel}"
      	style="width:75%" header="Chat WebSocket">
      	<h:form id="chatPanel">

      	<h:commandButton id="logoutUser"
      		value="Logout"
      		action="#{chatController.logoutUser}" />

	      <h:panelGrid columns="2" columnClasses="col1,col2"
	        styleClass="topPanelGrid, tablePanelGrid">

		      	<h:panelGrid id="chatArea" styleClass="tableChatMSG">
		      		<b>Welcome to the chat. Use '@username' to send a direct message</b>
		      	</h:panelGrid>
	
		      	<p:panel header="Users" styleClass="panelOnlineScroll">
			      	<h:panelGrid id="allOnlines">
			    		<ui:repeat var="user" value="#{chatController.allNicknames}" varStatus="status">
							<tr id="#{user}">
								<td>#{user}</td>
							</tr>
						</ui:repeat>
			      	</h:panelGrid>
		      	</p:panel>	
		      	
		      	<h:inputTextarea id="insertMSG" value="#{chatController.textMessage}"
		      		scrollHeight="4" rows="3" 
			      	style="width:98%; resize: none;" />
			     <h:panelGrid columns="1" cellpadding="4">
			    	<h:commandButton id="sendMsg" type="button" value="Send" onclick="sendText();" />
			     	<h:outputLabel id="myNickName" value="#{chatController.nickname}" />
			     </h:panelGrid>
			     
	      </h:panelGrid>
		      		
      	</h:form>
      	
      </p:panel>
      
      </ui:define>
    </ui:composition>
  </h:body>
</html>